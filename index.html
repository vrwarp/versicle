<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/png" href="/pwa-32x32.png" sizes="16x16 32x32" />
  <link rel="icon" type="image/png" href="/pwa-192x192.png" sizes="192x192" />
  <link rel="icon" type="image/png" href="/pwa-512x512.png" sizes="512x512" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Versicle</title>
</head>

<body>
  <script>
    // Critical Fix for epub.js iframe sandboxing
    // epub.js sometimes creates iframes without the correct sandbox attributes,
    // causing "Blocked script execution" errors with srcdoc.
    // We intercept createElement to enforce permissions.
    const originalCreateElement = document.createElement;
    document.createElement = function (tagName, options) {
      const element = originalCreateElement.call(document, tagName, options);
      if (tagName.toLowerCase() === 'iframe') {
        try {
          element.setAttribute('sandbox', 'allow-scripts allow-same-origin allow-popups allow-forms');
        } catch (e) {
          console.warn('Failed to set sandbox on iframe', e);
        }
      }
      return element;
    };
  </script>
  <div id="root"></div>
  <script type="module" src="/src/main.tsx"></script>
</body>

</html>